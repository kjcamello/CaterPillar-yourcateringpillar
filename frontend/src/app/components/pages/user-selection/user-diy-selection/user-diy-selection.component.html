<div class="header-position">
<app-header-user></app-header-user>
</div>
<app-search></app-search>
<!-- user-diy-selection.component.html -->
<div class="position">
<div class="category-tabs">
  <div class="tab" [ngClass]="{ 'selected': selectedCategory === 'Maincourse' }" (click)="loadFoodItems('maincourseItems')">Main Course</div>
  <div class="tab" [ngClass]="{ 'selected': selectedCategory === 'Appetizer' }" (click)="loadFoodItems('appetizerItems')">Appetizer</div>
  <div class="tab" [ngClass]="{ 'selected': selectedCategory === 'Soup' }" (click)="loadFoodItems('soupItems')">Soup</div>
  <div class="tab" [ngClass]="{ 'selected': selectedCategory === 'Salad' }" (click)="loadFoodItems('saladItems')">Salad</div>
  <div class="tab" [ngClass]="{ 'selected': selectedCategory === 'Dessert' }" (click)="loadFoodItems('dessertItems')">Dessert</div>
  <div class="tab" [ngClass]="{ 'selected': selectedCategory === 'Drink' }" (click)="loadFoodItems('drinkItems')">Drink</div>
</div>

<div>
<form class="items-form">
  <div>
    <!-- user-diy-selection.component.html -->

<!-- ... (previous code) ... -->

<div *ngIf="(selectedItems | async)?.length; else noFoodItems">
  <ul class="items-list">
    <li class="list-item" *ngFor="let item of selectedItems | async" (click)="toggleFoodSelection(item)" [ngClass]="{ 'selected': item.selected }">
      <div>
        <img [src]="item.food_image" alt="Food Image" class="food-image">
      </div>
      <div class="price-tag">
        â‚±{{ item.pax_price }}/pax
      </div>
      <div class="pax">
        caters {{ item.minimum_pax }} to {{ item.maximum_pax }} pax
      </div>
      <div class="food_name">
        <h2>{{ item.food_name }}</h2>
      </div>
      <div>
        <strong>Description:</strong>
        <ng-container *ngIf="!item.showFullDescription && item.food_description.length > 25">
          {{ item.food_description.slice(0, 25) }}...
          <span class="see-more" (click)="foodtoggleDescription(item)">See more</span>
        </ng-container>
        <ng-container *ngIf="item.showFullDescription || item.food_description.length <= 25">
          {{ item.food_description }}
          <span class="see-more" *ngIf="item.showFullDescription" (click)="foodtoggleDescription(item)">See less</span>
        </ng-container>
      </div>
        <!-- Display the selected_pax input when the item is selected -->
<!-- Display the selected_pax input when the item is selected -->
<div *ngIf="item.selected">
  <label for="selectedPax">Preferred Pax:</label>
  <input
    type="number"
    id="selectedPax"
    [(ngModel)]="item.selectedPax"
    (input)="checkAndAdjustPax(item)"
    (click)="$event.stopPropagation()" 
    name="selectedPax"
    placeholder="Enter preferred pax"
  />
</div>
    </li>
  </ul>
</div>

<!-- ... (remaining code) ... -->

<ng-template #noFoodItems>
  <div class="no_food_items">
  <h3>No food items added yet in this category.</h3>
</div>
</ng-template>
</div>
</form>

<app-user-event-selection></app-user-event-selection>

<app-user-voucher-selection></app-user-voucher-selection>

<app-user-extra-service-selection></app-user-extra-service-selection>

<h2 class="food_items_name">Food Items</h2>

<h2 class="extra_service_name">Extra Services</h2>

<div class="wall1"> .</div>
<div class="wall2"> .</div>
<div class="wall3"> .</div>
</div>

</div>

<!-- user-diy-selection.component.html -->

<!-- Add this div to display selected event and date/time form -->
<div class="selected-event-wrapper" *ngIf="selectedEvent">
  <h3 class="event_name">{{ selectedEvent.eventName }}</h3>
  <form [formGroup]="dateAndTimeForm" class="date-time-form">
    <!-- Update formControlName to match the names in your form group -->
    <label for="selectedDate">Event Date:</label>
    <input type="date" id="selectedDate" formControlName="selectedDate">

    <label for="selectedTime">Event Time:</label>
    <input type="time" id="selectedTime" formControlName="selectedTime">
  </form>
</div>

<button class="review-order-button" (click)="toggleReceipt()">Review Order</button>

<!-- E-Receipt Content -->
<div *ngIf="showReceipt" class="ereceipt-background"></div>
<div *ngIf="showReceipt" class="ereceipt-content">
  <h3>Your Order Details</h3>
    <!-- Display selected food items -->
    <div class="receipt-items">
      <div class="receipt-item" *ngFor="let item of selectedItems | async">
        <div class="item-details">
          <div class="food-name">{{ item.food_name }}</div>
          <div>
            <strong>Preferred Pax:</strong> {{ item.selectedPax }}
          </div>
        </div>
        <div class="right-align">{{ item.pax_price * item.selectedPax | currency: 'PHP':true }}</div>
      </div>
    </div>

  <div class="receipt-items">
    <!-- Display selected event details -->
    <div class="receipt-item">
      <div class="item-details">
        <div class="food-name">Event: {{ selectedEvent?.eventName }}</div>
        <div>
          <strong>Selected Date and Time:</strong>
          {{ formatDate(dateAndTimeForm.value.selectedDate) }} at {{ formatTime(dateAndTimeForm.value.selectedTime) }}
        </div>
      </div>
      <!-- Adjust the price as needed -->
      <div class="right-align">{{ selectedEvent?.pax_price | currency: 'PHP':true }}</div>
    </div>
    <!-- Add more receipt items for other selections if needed -->
  </div>
  <div class="total-section">
    <div class="grand-total-label">Grand Total:</div>
    <div class="grand-total-value">{{ calculateGrandTotal() | currency: 'PHP':true }}</div>


    
  </div>
</div>
